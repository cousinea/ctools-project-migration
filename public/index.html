<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Project Migration</title>
  <link rel="stylesheet" href="vendors/bootstrap/bootstrap.min.css">
  <link rel="stylesheet" href="css/custom.css">
</head>

<body ng-app="projectMigrationApp">
    <nav role="navigation" class="navbar navbar-default" style="background:#00274c">
      <div class="container-fluid">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header mastHead">
          <button data-target="#bs-example-navbar-collapse-1" data-toggle="collapse" class="navbar-toggle collapsed" type="button">
              <span class="sr-only">Toggle navigation</span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
          </button>
          <h1 class="navbar-brand collapse-nav" style="margin:0;color:#fff">Project Site Export</h1>
        </div>
        <!-- Collect the nav links, forms, and other content for toggling -->
        <div id="bs-example-navbar-collapse-1" class="collapse navbar-collapse">
          <ul class="nav navbar-nav navbar-right">
              <li>
                  <a id="helpLink" class="collapse-nav" href="http://its.umich.edu/projects/ctools-project-sites/training-resources/migration-tool-help" style="color:#fff" target="_blank">Help</a>
              </li>
          </ul>
        </div>
        <!-- /.navbar-collapse -->
      </div>
    </nav>
  <div ng-controller="projectMigrationController" class="container-fluid" style="padding:0 20px">
    <div class="row">
      <div class="col-md-6 col-lg-6 col-sm-6 col-xs-12">
        <p>Some brief explanatory text of what is going on here and a <a href="help.html" target="_blank">link to find out more.</a></p>
      </div>
      <div class="col-md-6 col-lg-6 col-sm-6 col-xs-12 topMenu">
          <a ng-show="!boxAuthorized" class="btn btn-primary" href="" data-toggle="modal" data-target="#boxAuthModal">Authorize App to Box</a>
          <a ng-show="boxAuthorized" class="btn btn-primary" href="" data-toggle="modal" data-target="#boxLogoutModal">Unauthorize App from Box</a>
      </div>
    </div>  
    <div class="row">
      <div class="col-md-4 col-lg-4">
        <div class="panel panel-default">
          <div class="panel-heading">
            <h3 class="panel-title" id="projectPanelHeader">Available Project Sites</h3></div>
          <div class="panel-body" aria-labelledby="projectPanelHeader">
            <div ng-include="'views/projects-source.html'">
            </div>
          </div>
        </div>
      </div>
      <div class="col-md-4 col-lg-4">
        <div class="panel panel-default"> 
          <div class="panel-heading">
            <h3 class="panel-title" id="migratingPanelHeader">Exports in Progress
              <small ng-if="status.migrations">Updated: {{status.migrations}}</small>
              <span class="badge pull-right" ng-if="!migratingProjectsError">{{migratingProjects.length}}</span>
            </h3>
          </div>
          <div class="panel-body" aria-labelledby="migratingPanelHeader" aria-live="polite" aria-relevant="additions removals">
            <div ng-include="'views/projects-migrating.html'">
            </div>
          </div>
        </div>
      </div>
      <div class="col-md-4 col-lg-4">
        <div class="panel panel-default">
          <div class="panel-heading">
            <h3 class="panel-title" id="migratedPanelHeader">Exports completed  <small ng-if="status.migrated">Updated: {{status.migrated}}</small> <span class="badge pull-right"  ng-if="!migratedProjectsError">{{migratedProjects.length}}</span></h3>
          </div>
          <div class="panel-body" aria-labelledby="migratedPanelHeader" aria-live="polite" aria-relevant="additions">
            <div ng-include="'views/projects-migrated.html'">
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div ng-controller="projectMigrationControllerStatus">
    <a  aria-hidden="true" data-target="#statusModal" data-toggle="modal" href="" class="statusButton" ng-click="getStatus()"> <span class="sr-only">Status of application</span></a>
    <div class="modal fade" id="statusModal" tabindex="-1" role="dialog" aria-labelledby="statusModalLabel">
      <div class="modal-dialog" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
            <h4 class="modal-title" id="statusModalLabel">Status</h4>
          </div>
          <div class="modal-body">
            <div class="container">
              <div class="row">
                <div class="col-md-2 col-lg-2">
                  ping    
                </div>
                <div class="col-md-10 col-lg-10">
                  {{server_status.urls.ping}}
                </div>
              </div>
              <div class="row">
                <div class="col-md-2 col-lg-2">
                  Box Server
                </div>
                <div class="col-md-10 col-lg-10">
                 {{server_status.urls['Box server']}}
                </div>
              </div>
              <div class="row">
                <div class="col-md-2 col-lg-2">
                  CTools Server
                </div>
                <div class="col-md-10 col-lg-10">
                  {{server_status.urls['CTools server']}}
                </div>
              </div>
              <div class="row">
                <div class="col-md-2 col-lg-2">
                  Last commit
                </div>
                <div class="col-md-10 col-lg-10">
                  {{server_status.build.last_commit}}
                </div>
              </div>
              <div class="row">
                <div class="col-md-2 col-lg-2">
                  Repo
                </div>
                <div class="col-md-10 col-lg-10">
                  {{server_status.build.repo}}
                </div>
              </div>
              <div class="row">
                <div class="col-md-2 col-lg-2">
                  Project
                </div>
                <div class="col-md-10 col-lg-10">
                  {{server_status.build.project}}
                </div>
              </div>
              <div class="row">
                <div class="col-md-2 col-lg-2">
                  Tag
                </div>
                <div class="col-md-10 col-lg-10">
                  {{server_status.build.tag}}
                </div>
              </div>
              <div class="row">
                <div class="col-md-2 col-lg-2">
                  Time stamp
                </div>
                <div class="col-md-10 col-lg-10">
                  {{server_status.build.timestamp | date:'MM/dd h:mma'}}
                </div>
              </div>
            </div>
          </div>  
          <div class="modal-footer">
            <button type="button" class="btn btn-link" data-dismiss="modal">Close</button>
          </div>
        </div>
      </div>
    </div>
  </div>



  <script type="text/javascript" src="vendors/jquery/jquery-1.11.0.min.js"></script>
  <script src="vendors/bootstrap/bootstrap.min.js" type="text/javascript" charset="utf-8"></script>
  <script src="vendors/angular/angular.min.js" type="text/javascript" charset="utf-8"></script>
  <script src="vendors/angular/angular-animate.min.js" type="text/javascript" charset="utf-8"></script>
  <script src="vendors/underscore/underscore-min.js" type="text/javascript" charset="utf-8"></script>
  <script src="vendors/moment/moment.min.js" type="text/javascript" charset="utf-8"></script>
  <script src="js/app.js" type="text/javascript" charset="utf-8"></script>
  <script src="js/controllers.js" type="text/javascript" charset="utf-8"></script>
  <script src="js/factories.js" type="text/javascript" charset="utf-8"></script>
  <script src="js/filters.js" type="text/javascript" charset="utf-8"></script>
  <script src="js/utils.js" type="text/javascript" charset="utf-8"></script>
</body>

</html>
